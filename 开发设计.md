好的，根据你希望实现一个类似帆软但更轻量化的数据集成与定时任务管理工具的需求，并结合你提供的**微信小程序设计指南**的界面风格参考，我为你编写了这份详细的开发设计文档。

这份文档将遵循微信设计指南中 **友好礼貌、清晰明确、便捷优雅、统一稳定** 的核心原则，来指导整个系统的开发。

### 🎯 项目概述与设计理念

**1. 项目目标**
开发一个轻量级、易用的“数据流集成平台”，核心功能是集中管理多种异构数据源，并通过可视化配置定时任务，实现数据在源与目标之间的自动化流转。

**2. 设计理念：源于微信设计指南**
我们将严格遵循微信指南，将其“以用户为中心”的设计哲学融入企业级工具中：
*   **友好礼貌**：界面清爽，聚焦数据与任务管理，避免无关元素干扰。
*   **清晰明确**：导航直观，让用户始终知晓“在哪里、能去哪、如何回”。
*   **便捷优雅**：最大化利用选择、点击等操作，减少复杂输入；提供清晰的加载与结果反馈。
*   **统一稳定**：全平台采用一致的组件、交互和视觉规范，降低用户学习成本。

### 🖥️ 系统架构设计

**1. 整体技术栈**
*   **后端**：Java (Spring Boot)，负责核心业务逻辑、任务调度、数据连接与处理。
*   **前端**：Vue 3 + TypeScript + Vite，构建高性能单页面应用。
*   **任务调度**：集成 `Quartz` 或 `XXL-Job` 框架，保障定时任务的可靠执行。
*   **数据源驱动**：分别为 MySQL、Oracle、MongoDB、Elasticsearch 集成官方或成熟的 JDBC/客户端驱动。

**2. 核心模块设计**
*   **数据源管理模块**：负责数据源配置的CRUD、连接测试与连接池管理。
*   **任务编排模块**：核心模块，提供可视化界面，让用户通过拖拽、连线、配置的方式构建数据流任务（输入节点 -> 处理节点 -> 输出节点）。
*   **任务调度与执行模块**：接收编排好的任务，根据设定的cron表达式触发执行，并管理任务实例的生命周期。
*   **日志与监控模块**：记录任务执行详情、系统操作日志，并提供任务运行状态的监控面板。

### 🎨 前端界面与交互详细设计

以下界面设计将深度融合微信设计指南的视觉与交互规范。

**1. 视觉规范 (WeUI 风格)**
*   **字体**：优先使用系统字体，关键字号参考：大标题(20pt)、列表标题(17pt)、正文(15pt)、辅助文字(12pt)。
*   **色彩**：主色调采用微信指南中的蓝色 (`#07C160` 用于成功/主按钮)，搭配中性灰作为背景和文字色。错误状态使用红色 (`#FA5151`)，警告使用橙色。
*   **组件库**：基于 `Vant` 或 `Element Plus` 等Vue组件库进行二次开发，使其样式高度契合 **WeUI** 风格，确保按钮、列表、输入框、对话框等组件与微信生态的视觉统一。

**2. 核心页面与交互流程**
*   **(1) 数据源管理页**
    *   **设计**：页面顶部为“新增数据源”按钮（绿色主按钮），下方为卡片式列表。
    *   **列表项**：每张卡片展示数据源名称、类型图标、连接状态（用圆点标识，遵循**清晰明确**原则）。卡片上提供“测试连接”、“编辑”、“删除”等操作按钮。
    *   **交互反馈**：点击“测试连接”后，在按钮区域或卡片内显示**局部加载**动画（如微信指南推荐的旋转图标）。成功或失败后，使用**文字型弹出提示**（1.5秒后消失）给出明确结果。

*   **(2) 任务编排页 (核心)**
    *   **布局**：采用左-中-右三栏布局，**导航明确**。
        *   **左侧**：节点组件库面板，分类（输入、处理、输出）列出可拖拽的节点，如“MySQL输入”、“字段转换”、“Elasticsearch输出”。
        *   **中间**：任务画布区。用户可将左侧节点拖入此处，并通过连线连接节点，构成流程图。
        *   **右侧**：节点/任务属性配置面板。当选中画布中的节点时，此处显示该节点的详细配置表单（如SQL查询语句、索引名称等）。
    *   **交互**：
        *   连线、拖拽等操作需流畅，有视觉吸附效果。
        *   配置表单字段应有清晰标签和占位符提示。对于SQL等长文本输入，提供全屏编辑模式。
        *   保存任务时，进行表单校验。若出错，在**表单顶部全局提示**错误原因，并用红色高亮标识具体出错字段（遵循**异常可控**原则）。

*   **(3) 任务列表与监控页**
    *   **设计**：表格形式展示任务。关键列：任务名、状态（启用/禁用）、上次执行时间、下次执行时间、操作栏。
    *   **状态反馈**：启用/禁用状态使用开关组件。任务最近一次执行结果（成功/失败）用带颜色的徽标或文本显示在状态列。
    *   **操作**：提供“执行一次”、“编辑”、“查看日志”、“手动停止”等操作。点击“查看日志”后，以**模态对话框**或抽屉形式展示该任务的历史执行记录，提供过滤和搜索功能。

*   **(4) 全局加载与反馈 (贯穿始终)**
    *   **页面初始化/跳转**：使用微信指南中推荐的**全局加载反馈**样式，如在导航栏显示加载标题。
    *   **按钮操作/数据提交**：优先使用**局部加载反馈**。例如，点击保存后，按钮本身变为加载状态或在其附近显示微型加载器。
    *   **操作结果**：
        *   成功（如保存成功）：使用**图标型弹出提示**（绿色对勾），1.5秒自动消失。
        *   重要成功或警告（如删除确认）：使用**模态对话框**，要求用户明确知晓并确认。
        *   流程终结（如任务执行完成报告）：跳转至**结果页面**，清晰展示总结信息并提供后续操作按钮。

### 💡 关键实现要点与建议

1.  **数据源连接与安全**：
    *   数据库密码等敏感信息需加密存储。
    *   建议使用连接池（如HikariCP）管理数据库连接，提升性能。

2.  **任务执行引擎**：
    *   抽象出统一的“输入节点”、“输出节点”接口，便于未来扩展新的数据源类型。
    *   任务执行需具备容错机制和重试策略。一个节点的失败应能触发任务整体失败并记录详细错误日志。

3.  **性能与用户体验**：
    *   对于大数据量传输任务，考虑引入分页查询、批次写入、流式处理等策略，并在前端提供实时进度条显示（遵循**加载反馈注意事项**）。
    *   前端利用Vue 3的Composition API进行逻辑复用，保持代码清晰。

### 📋 项目开发阶段建议
1.  **第一阶段（MVP）**：实现MySQL到MySQL的数据源管理和基础定时任务（硬编码SQL）。
2.  **第二阶段（核心）**：实现可视化任务编排画布，支持至少一种输入和一种输出数据源。
3.  **第三阶段（完善）**：接入所有计划的数据源（MongoDB, Oracle, ES），增加更多处理节点（如过滤、映射），完善日志与监控功能。
4.  **第四阶段（优化）**：优化UI/UX，引入权限管理（RBAC），实现系统高可用与集群部署。

---
